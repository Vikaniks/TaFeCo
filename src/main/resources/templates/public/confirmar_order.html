<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/layout}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaFe - Co</title>
    <link rel="icon" th:href="@{/img/Pollo.svg}" />
    <link rel="stylesheet" th:href="@{/css/styles_2.css}" />
    <link rel="stylesheet" th:href="@{/font-awesome-4.7.0/css/font-awesome.min.css}" />
</head>

<body>
<div th:replace="include/header :: header"></div>
<div th:replace="include/nav :: nav"></div>

<main layout:fragment="content">

        <section id="tablas">
            
            <div class="pdf-header">
                <h1>Фермерское хозяйство <br> "ТаФе & Со"</h1>
                <p>Подтверждение заказа</p>
            </div>

            <h3>Оформлен заказ Nº<span id="number_order"></span><span id="data-order"></span></h3>
                <div class="form-group-row">
                    <p>Получатель: <strong><span id="recipient"></span></strong></p>
                    <p>Телефон: <strong><span id="phone"></span></strong></p>
                    <p>Адрес доставки: <strong><span id="address"></span></strong></p>
                   
                    <p>Дата-время доставки:<strong><span id="delivery-datetime"></span></strong></p>
                    <p>Метод оплаты:<strong><span id="payment-option-text"></span></strong></p>
                </div>
            <table class="custom-table">
                <thead>
                    <tr>
                        <th scope="col">Изображение</th>
                        <th scope="col">Наименование</th>
                        <th scope="col">Количество</th>
                        <th scope="col">Цена</th>
                        <th scope="col">Стоимость</th>
                        <th scope="col">Удалить</th>
                        
                    </tr>
                </thead>
                <tbody id="cart-items">
                    <!-- Товары будут загружены сюда -->
                    <p><strong>Итого: <span id="total-sum">0 ₽</span></strong></p>
                    <p><strong>Скидка: <span id="discount">0 ₽</span></strong></p>
                    <p><strong>К оплате: <span id="total-payment">0 ₽</span></strong></p>
                </tbody>
                <tfoot>
                    <tr>
                        <th scope="row" >
                            <td id="go-home" colspan="1">
                                <a href="index.html" id="go-home-link">На главную</a>
                            </td>
                            <td id="download" colspan="1">
                                <a href="#" id="download-pdf">Скачать в PDF</a>
                            </td>
                            <td id="total-items" colspan="2"></td>
                        </th>
                        
                    </tr>
                </tfoot>
            </table>
            <div class="pdf-footer">
                <p>Спасибо за покупку!</p>
                <p>Контакты: example@mail.com | +7 (123) 456-78-90</p>
            </div>
        </section>
    
 </main>

<div th:replace="include/footer :: footer"></div>
<script type="module" src="/js/main.js"></script>


<script>
    document.addEventListener("DOMContentLoaded", () => {
    const paymentDisplay = document.getElementById("payment-option-text");
    if (!paymentDisplay) {
        console.warn("Элемент #payment-option-text не найден");
        return;
    }

    const orderDataRaw = localStorage.getItem("orderData");
    if (!orderDataRaw) {
        console.warn("orderData в localStorage отсутствует");
        return;
    }

    let orderData;
    try {
        orderData = JSON.parse(orderDataRaw);
    } catch (e) {
        console.error("Ошибка парсинга orderData:", e);
        return;
    }

    const paymentTextMap = {
        "cash": "Оплата наличными при доставке",
        "card": "Банковская карта"
    };

    paymentDisplay.textContent = paymentTextMap[orderData.paymentOption] || "Не указано";
});

</script>


<script src="/js/lib/html2pdf.bundle.min.js"></script>
<script src="/js/lib/jspdf.umd.min.js"></script> 


    
</body>

</html>